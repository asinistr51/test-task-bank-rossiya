{"ast":null,"code":"export const calculator = (formValues, depositsList) => {\n  const depositIndex = depositsList.findIndex(deposit => deposit.code === formValues.code);\n  const selectedDeposit = depositsList.deposits[depositIndex];\n  const periodsList = selectedDeposit.param.map(param => param.period_from);\n  const indexOfRange = defineRange(formValues.period, periodsList);\n  const depositItemParams = selectedDeposit.param[indexOfRange];\n  const summsList = depositItemParams.summs_and_rate.map(param => param.summ_from);\n  const indexOfRate = defineRange(formValues.summ, summsList);\n  const rate = selectedDeposit.param[indexOfRange].summs_and_rate[indexOfRate].rate;\n  const profit = Math.round(+formValues.summ * rate * +formValues.period * 100) / 100;\n  return { ...formValues,\n    rate,\n    profit\n  };\n};\nexport const defineRange = (searchingValue, listOfValues) => {\n  const index = listOfValues.findIndex(value => value > +searchingValue);\n  return index === -1 ? listOfValues.length - 1 : index;\n};","map":{"version":3,"sources":["/home/as1nistr/test-task-bank-rossiya/src/utils/calculator.ts"],"names":["calculator","formValues","depositsList","depositIndex","findIndex","deposit","code","selectedDeposit","deposits","periodsList","param","map","period_from","indexOfRange","defineRange","period","depositItemParams","summsList","summs_and_rate","summ_from","indexOfRate","summ","rate","profit","Math","round","searchingValue","listOfValues","index","value","length"],"mappings":"AAQA,OAAO,MAAMA,UAAoB,GAAG,CAClCC,UADkC,EAElCC,YAFkC,KAG/B;AACH,QAAMC,YAAoB,GAAGD,YAAY,CAACE,SAAb,CAC1BC,OAAD,IAA0BA,OAAO,CAACC,IAAR,KAAiBL,UAAU,CAACK,IAD3B,CAA7B;AAGA,QAAMC,eAA4B,GAAGL,YAAY,CAACM,QAAb,CAAsBL,YAAtB,CAArC;AACA,QAAMM,WAAqB,GAAGF,eAAe,CAACG,KAAhB,CAAsBC,GAAtB,CAC3BD,KAAD,IAA8BA,KAAK,CAACE,WADR,CAA9B;AAGA,QAAMC,YAAoB,GAAGC,WAAW,CAACb,UAAU,CAACc,MAAZ,EAAoBN,WAApB,CAAxC;AACA,QAAMO,iBAAoC,GACxCT,eAAe,CAACG,KAAhB,CAAsBG,YAAtB,CADF;AAEA,QAAMI,SAAmB,GAAGD,iBAAiB,CAACE,cAAlB,CAAiCP,GAAjC,CACzBD,KAAD,IAA0CA,KAAK,CAACS,SADtB,CAA5B;AAGA,QAAMC,WAAmB,GAAGN,WAAW,CAACb,UAAU,CAACoB,IAAZ,EAAkBJ,SAAlB,CAAvC;AACA,QAAMK,IAAY,GAChBf,eAAe,CAACG,KAAhB,CAAsBG,YAAtB,EAAoCK,cAApC,CAAmDE,WAAnD,EAAgEE,IADlE;AAEA,QAAMC,MAAc,GAAGC,IAAI,CAACC,KAAL,CAAW,CAACxB,UAAU,CAACoB,IAAZ,GAAmBC,IAAnB,GAA0B,CAACrB,UAAU,CAACc,MAAtC,GAA+C,GAA1D,IAAiE,GAAxF;AACA,SAAO,EAAC,GAAGd,UAAJ;AAAgBqB,IAAAA,IAAhB;AAAsBC,IAAAA;AAAtB,GAAP;AACD,CAtBM;AAwBP,OAAO,MAAMT,WAAqB,GAAG,CACnCY,cADmC,EAEnCC,YAFmC,KAGxB;AACX,QAAMC,KAAa,GAAGD,YAAY,CAACvB,SAAb,CACnByB,KAAD,IAAmBA,KAAK,GAAG,CAACH,cADR,CAAtB;AAGA,SAAOE,KAAK,KAAK,CAAC,CAAX,GAAeD,YAAY,CAACG,MAAb,GAAsB,CAArC,GAAyCF,KAAhD;AACD,CARM","sourcesContent":["import {\n  FormState,\n  DepositsList,\n  DepositItem,\n  DepositItemParams,\n  DepositItemParamsSummsAndRate,\n} from '../interfaces/interfaces';\n\nexport const calculator: Function = (\n  formValues: FormState,\n  depositsList: DepositsList\n) => {\n  const depositIndex: number = depositsList.findIndex(\n    (deposit: DepositItem) => deposit.code === formValues.code\n  );\n  const selectedDeposit: DepositItem = depositsList.deposits[depositIndex];\n  const periodsList: number[] = selectedDeposit.param.map(\n    (param: DepositItemParams) => param.period_from\n  );\n  const indexOfRange: number = defineRange(formValues.period, periodsList);\n  const depositItemParams: DepositItemParams =\n    selectedDeposit.param[indexOfRange];\n  const summsList: number[] = depositItemParams.summs_and_rate.map(\n    (param: DepositItemParamsSummsAndRate) => param.summ_from\n  );\n  const indexOfRate: number = defineRange(formValues.summ, summsList);\n  const rate: number =\n    selectedDeposit.param[indexOfRange].summs_and_rate[indexOfRate].rate;\n  const profit: number = Math.round(+formValues.summ * rate * +formValues.period * 100) / 100;\n  return {...formValues, rate, profit}\n};\n\nexport const defineRange: Function = (\n  searchingValue: string,\n  listOfValues: number[]\n): number => {\n  const index: number = listOfValues.findIndex(\n    (value: number) => value > +searchingValue\n  );\n  return index === -1 ? listOfValues.length - 1 : index;\n};\n"]},"metadata":{},"sourceType":"module"}