{"ast":null,"code":"var _jsxFileName = \"/home/as1nistr/test-task-bank-rossiya/src/components/CalculatorPref.tsx\";\nimport React from 'react';\nimport { v4 } from 'uuid';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Select } from '@material-ui/core';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport '../styles/CalculatorPref.css';\nimport useFormController from '../utils/useFormController';\nimport { calculator } from '../utils/calculator';\nimport { ModalWindow } from './ModalWindow';\nimport { findIndexInDepositsList } from '../utils/findIndexInDepositsList';\nexport const CalculatorPref = ({\n  properties\n}) => {\n  var _properties$deposits$, _properties$deposits$2, _properties$deposits$3, _properties$deposits$4, _properties$deposits$5, _properties$deposits$6, _properties$deposits$7, _properties$deposits$8, _properties$deposits, _properties$deposits$9;\n\n  const [formValues, setFormValues] = useFormController({\n    code: '',\n    period: '',\n    summ: ''\n  });\n  const [depositOffer, setDepositOffer] = React.useState();\n  const [visible, setVisible] = React.useState(false);\n  const [codeIndex, setCodeIndex] = React.useState(NaN);\n  const [periodIndex, setPeriodIndex] = React.useState(NaN);\n  React.useEffect(() => {\n    if (formValues.code) {\n      setCodeIndex(findIndexInDepositsList(properties, formValues));\n    } else {\n      setCodeIndex(NaN);\n    }\n  }, [formValues.code, properties, formValues]);\n  React.useEffect(() => {\n    setPeriodIndex(findIndexInDepositsParams(properties, formValues));\n  }, [formValues.period, properties, formValues]);\n\n  const handleClickOpenModal = () => {\n    setVisible(true);\n  };\n\n  const handleClickCloseModal = () => {\n    setVisible(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FormControl, {\n    className: \"input-section\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"\\u0422\\u0438\\u043F \\u0434\\u0435\\u043F\\u043E\\u0437\\u0438\\u0442\\u0430\"), /*#__PURE__*/React.createElement(Select, {\n    labelId: \"outlined-basic\",\n    id: \"outlined-basic\",\n    name: \"code\",\n    value: formValues.code,\n    label: \"\\u0422\\u0438\\u043F\",\n    onChange: setFormValues,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"\\u041D\\u0435 \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\")), properties.deposits.map(el => /*#__PURE__*/React.createElement(MenuItem, {\n    key: v4(),\n    value: el.code,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, el.name)))), /*#__PURE__*/React.createElement(TextField, {\n    className: \"input-section\",\n    name: \"period\",\n    type: \"number\",\n    error: !formValues.code,\n    helperText: formValues.code ? `Минимальный срок: ${(_properties$deposits$ = properties.deposits[codeIndex]) === null || _properties$deposits$ === void 0 ? void 0 : _properties$deposits$.param[0].period_from} дней` : 'Выберите тип',\n    disabled: !formValues.code,\n    label: \"\\u0421\\u0440\\u043E\\u043A\",\n    variant: \"outlined\",\n    value: formValues.period,\n    onChange: setFormValues,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    className: \"input-section\",\n    name: \"summ\",\n    type: \"number\",\n    label: \"\\u0421\\u0443\\u043C\\u043C\\u0430\",\n    disabled: isNaN(codeIndex) ? true : +formValues.period < ((_properties$deposits$2 = properties.deposits[codeIndex]) === null || _properties$deposits$2 === void 0 ? void 0 : _properties$deposits$2.param[0].period_from),\n    error: isNaN(periodIndex) ? true : +formValues.summ < ((_properties$deposits$3 = properties.deposits[codeIndex]) === null || _properties$deposits$3 === void 0 ? void 0 : (_properties$deposits$4 = _properties$deposits$3.param[periodIndex]) === null || _properties$deposits$4 === void 0 ? void 0 : _properties$deposits$4.summs_and_rate[0].summ_from),\n    helperText: formValues.period ? `Минимальная сумма: ${(_properties$deposits$5 = properties.deposits[codeIndex]) === null || _properties$deposits$5 === void 0 ? void 0 : (_properties$deposits$6 = _properties$deposits$5.param[periodIndex]) === null || _properties$deposits$6 === void 0 ? void 0 : _properties$deposits$6.summs_and_rate[0].summ_from}` : `Укажите срок`,\n    variant: \"outlined\",\n    value: formValues.summ,\n    onChange: setFormValues,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"input-section\",\n    onClick: () => {\n      setDepositOffer(calculator(formValues, properties));\n      handleClickOpenModal();\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: isNaN(periodIndex) ? true : +formValues.summ < ((_properties$deposits$7 = properties.deposits[codeIndex]) === null || _properties$deposits$7 === void 0 ? void 0 : (_properties$deposits$8 = _properties$deposits$7.param[periodIndex]) === null || _properties$deposits$8 === void 0 ? void 0 : _properties$deposits$8.summs_and_rate[0].summ_from),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, \"\\u0420\\u0430\\u0441\\u0441\\u0447\\u0438\\u0442\\u0430\\u0442\\u044C \\u0432\\u043A\\u043B\\u0430\\u0434\"), /*#__PURE__*/React.createElement(ModalWindow, {\n    visible: visible,\n    onClose: handleClickCloseModal,\n    offer: depositOffer,\n    depositName: properties === null || properties === void 0 ? void 0 : (_properties$deposits = properties.deposits) === null || _properties$deposits === void 0 ? void 0 : (_properties$deposits$9 = _properties$deposits.find(deposit => deposit.code === formValues.code)) === null || _properties$deposits$9 === void 0 ? void 0 : _properties$deposits$9.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }));\n};","map":{"version":3,"sources":["/home/as1nistr/test-task-bank-rossiya/src/components/CalculatorPref.tsx"],"names":["React","v4","FormControl","InputLabel","Select","MenuItem","TextField","Button","useFormController","calculator","ModalWindow","findIndexInDepositsList","CalculatorPref","properties","formValues","setFormValues","code","period","summ","depositOffer","setDepositOffer","useState","visible","setVisible","codeIndex","setCodeIndex","NaN","periodIndex","setPeriodIndex","useEffect","findIndexInDepositsParams","handleClickOpenModal","handleClickCloseModal","deposits","map","el","name","param","period_from","isNaN","summs_and_rate","summ_from","find","deposit"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { v4 } from 'uuid';\n\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { Select } from '@material-ui/core';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport '../styles/CalculatorPref.css';\n\nimport { DepositsList, DepositItem, FormState } from '../interfaces/interfaces';\nimport useFormController from '../utils/useFormController';\nimport { calculator} from '../utils/calculator';\nimport { ModalWindow } from './ModalWindow';\nimport { findIndexInDepositsList } from '../utils/findIndexInDepositsList';\n\ninterface CalculatorPrefProps {\n  properties: DepositsList;\n}\n\nexport const CalculatorPref: React.FC<CalculatorPrefProps> = ({\n  properties,\n}: CalculatorPrefProps): React.ReactElement => {\n  const [formValues, setFormValues] = useFormController({\n    code: '',\n    period: '',\n    summ: '',\n  });\n  const [depositOffer, setDepositOffer] = React.useState<\n    FormState | undefined\n  >();\n  const [visible, setVisible] = React.useState<boolean>(false);\n  const [codeIndex, setCodeIndex] = React.useState<number>(NaN);\n  const [periodIndex, setPeriodIndex] = React.useState<number>(NaN);\n  React.useEffect(() => {\n    if (formValues.code){\n      setCodeIndex(findIndexInDepositsList(properties, formValues));\n    } else {\n      setCodeIndex(NaN)\n    }\n    \n  }, [formValues.code, properties, formValues]);\n\n  React.useEffect(() => {\n      setPeriodIndex(findIndexInDepositsParams(properties, formValues));\n\n  }, [formValues.period, properties, formValues]);\n  const handleClickOpenModal = (): void => {\n    setVisible(true);\n  };\n\n  const handleClickCloseModal = (): void => {\n    setVisible(false);\n  };\n\n  return (\n    <>\n      <FormControl className=\"input-section\" variant=\"outlined\">\n        <InputLabel>Тип депозита</InputLabel>\n        <Select\n          labelId=\"outlined-basic\"\n          id=\"outlined-basic\"\n          name=\"code\"\n          value={formValues.code}\n          label=\"Тип\"\n          onChange={setFormValues}\n        >\n          <MenuItem value=\"\">\n            <em>Не выбран</em>\n          </MenuItem>\n          {properties.deposits.map((el: DepositItem) => (\n            <MenuItem key={v4()} value={el.code}>\n              {el.name}\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <TextField\n        className=\"input-section\"\n        name=\"period\"\n        type=\"number\"\n        error={!formValues.code }\n        helperText={formValues.code ? `Минимальный срок: ${properties.deposits[codeIndex]?.param[0].period_from } дней`: 'Выберите тип'}\n        disabled={!formValues.code}\n        label=\"Срок\"\n        variant=\"outlined\"\n        value={formValues.period}\n        onChange={setFormValues}\n      />\n      <TextField\n        className=\"input-section\"\n        name=\"summ\"\n        type=\"number\"\n        label=\"Сумма\"\n        disabled={isNaN(codeIndex) ? true : +formValues.period < properties.deposits[codeIndex]?.param[0].period_from}\n        error={isNaN(periodIndex) ? true :+formValues.summ < properties.deposits[codeIndex]?.param[periodIndex]?.summs_and_rate[0].summ_from}\n        helperText={formValues.period ? `Минимальная сумма: ${properties.deposits[codeIndex]?.param[periodIndex]?.summs_and_rate[0].summ_from}` : `Укажите срок`}\n        variant=\"outlined\"\n        value={formValues.summ}\n        onChange={setFormValues}\n      />\n      <Button\n        className=\"input-section\"\n        onClick={() => {\n          setDepositOffer(calculator(formValues, properties));\n          handleClickOpenModal();\n        }}\n        variant=\"contained\"\n        color=\"primary\"\n        disabled={isNaN(periodIndex) ? true :+formValues.summ < properties.deposits[codeIndex]?.param[periodIndex]?.summs_and_rate[0].summ_from}\n      >\n        Рассчитать вклад\n      </Button>\n      <ModalWindow\n        visible={visible}\n        onClose={handleClickCloseModal}\n        offer={depositOffer}\n        depositName={\n          properties?.deposits?.find(\n            (deposit) => deposit.code === formValues.code\n          )?.name\n        }\n      />\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}